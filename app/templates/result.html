{% extends 'base.html' %}


{% block content %}

<header class="standard-header">
  <div class="container">
    
  </div>
</header>

<section class="result-section my-3" id="result">
  <div class="container">
    <div class="row">
      <div class="mt-1 mx-auto text-center">
        <h2>{{ city }}</h2>
      </div>
    </div>
<!-- Table displaying Meteo informations -->
    <div class="row"></div>

    <!-- Informations of Today -->
    <div class="col-lg-12">
      <div class="row">
        <div class="col-lg-6">
          <h2>{{ tides[0].day }} {{ tides[0].time.strftime('%d') }}</h2>
          <!-- Table displaying Meteo informations -->
          <div class="col-lg-12 m-2 table-responsive">
            <table id="meteo-table" class="table table-bordered">
              <thead> Météo </thead>
              <tbody>
                <tr>
                  <th>Heure</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[0].time.strftime('%d') %}
                    <td>{{ date.date.strftime('%H') }}h</td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Meteo</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[0].time.strftime('%d') %}
                    <td><img src="{{ url_for('static', filename='img/meteo-icon/{}.png'.format(date.img)) }}" alt="Icone"></td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Couverture nuageuse %</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[0].time.strftime('%d') %}
                    <td>
                      {% if date.cloud == 0 %}
                        -
                      {% else %}
                        {{ date.cloud }}
                      {% endif %}
                    </td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Pluie (mm/3h)</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[0].time.strftime('%d') %}
                    <td>
                      {% if date.rain == 0 %}
                        -
                      {% else %}
                        {{ date.rain }}
                      {% endif %}
                    </td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>°C</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[0].time.strftime('%d') %}
                    <td>{{ date.temp }}</td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Dir. Vent</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[0].time.strftime('%d') %}
                    <td>{{ date.wind_direction }}</td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Dir. Deg</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[0].time.strftime('%d') %}
                    <td>{{ date.wind_degree }}°</td>
                    {% endif%}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Force vent (Noeuds)</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[0].time.strftime('%d') %}
                    <td>{{ date.wind_speed }}</td>
                    {% endif %}
                  {% endfor %}
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Table displaying Tides informations -->
          <div class="col-lg-12 m-2 table-responsive">
            <table id="tides-table" class="table table-bordered">
              <thead> Marées </thead>
              <tbody>
                <tr>
                  <th>Heure</th>
                  <th>Type</th>
                  <th>Hauteur (m)</th>
                </tr>
                <tr>
                  <td> 
                    {% for tide in tides %}
                      {% if tide.day == tides[0].day %}
                        <p> {{tide.time.strftime('%H:%M')}} </p>
                      {% endif %}
                    {% endfor %}
                  </td>
                  <td>
                    {% for tide in tides %}
                      {% if tide.day == tides[0].day %}
                        <p> {{ tide.type }} </p>
                      {% endif %}
                    {% endfor %}
                  </td>
                  <td>
                    {% for tide in tides %}
                      {% if tide.day == tides[0].day %}
                        <p> {{ tide.height }} </p>
                      {% endif %}
                    {% endfor %}
                  </td>
                </tr>
                </tbody>
            </table>
          </div>
        </div>

        <!--  MAP -->
        <!-- End MAP -->
      </div>
    </div>

      <!-- End of informations for today -->

    <hr width="100%">

      <!-- Informations for days after -->

    <div class="col-lg-12">
      <div class="row">

        <!-- Table displaying for J2 -->
        <div class="col-lg-6" id="day-2">
          <h4>{{ tides[4].day }} {{ tides[4].time.strftime('%d') }}</h4>
          <div class="col-lg-12 table-responsive">
            <table id="meteo-table" class="table table-bordered">
              <thead> Météo </thead>
              <tbody>
                <tr>
                  <th>Heure</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[4].time.strftime('%d') %}
                    <td>{{ date.date.strftime('%H') }}h</td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Meteo</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[4].time.strftime('%d') %}
                    <td><img src="{{ url_for('static', filename='img/meteo-icon/{}.png'.format(date.img)) }}" alt="Icone"></td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Couverture nuageuse %</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[4].time.strftime('%d') %}
                    <td>
                      {% if date.cloud == 0 %}
                        -
                      {% else %}
                        {{ date.cloud }}
                      {% endif %}
                    </td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Pluie (mm/3h)</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[4].time.strftime('%d') %}
                    <td>
                      {% if date.rain == 0 %}
                        -
                      {% else %}
                        {{ date.rain }}
                      {% endif %}
                    </td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>°C</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[4].time.strftime('%d') %}
                    <td>{{ date.temp }}</td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Dir. Vent</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[4].time.strftime('%d') %}
                    <td>{{ date.wind_direction }}</td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Dir. Deg</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[4].time.strftime('%d') %}
                    <td>{{ date.wind_degree }}°</td>
                    {% endif%}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Force vent (Noeuds)</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[4].time.strftime('%d') %}
                    <td>{{ date.wind_speed }}</td>
                    {% endif %}
                  {% endfor %}
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Table displaying Tides informations -->
          <div class="col-lg-12 table-responsive">
            <table id="tides-table" class="table table-bordered">
              <thead> Marées </thead>
              <tbody>
                <tr>
                  <th>Heure</th>
                  <th>Type</th>
                  <th>Hauteur (m)</th>
                </tr>
                <tr>
                  <td> 
                    {% for tide in tides %}
                      {% if tide.day == tides[4].day %}
                        <p> {{tide.time.strftime('%H:%M')}} </p>
                      {% endif %}
                    {% endfor %}
                  </td>
                  <td>
                    {% for tide in tides %}
                      {% if tide.day == tides[4].day %}
                        <p> {{ tide.type }} </p>
                      {% endif %}
                    {% endfor %}
                  </td>
                  <td>
                    {% for tide in tides %}
                      {% if tide.day == tides[4].day %}
                        <p> {{ tide.height }} </p>
                      {% endif %}
                    {% endfor %}
                  </td>
                </tr>
                </tbody>
            </table>
          </div>
        </div>

        <!-- Table displaying for J3 -->
        <div class="col-lg-6" id="day-3">
          <h4>{{ tides[8].day }} {{ tides[8].time.strftime('%d') }}</h4>
          <div class="col-lg-12 table-responsive">
            <table id="meteo-table" class="table table-bordered">
              <thead> Météo </thead>
              <tbody>
                <tr>
                  <th>Heure</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[8].time.strftime('%d') %}
                    <td>{{ date.date.strftime('%H') }}h</td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Meteo</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[8].time.strftime('%d') %}
                    <td><img src="{{ url_for('static', filename='img/meteo-icon/{}.png'.format(date.img)) }}" alt="Icone"></td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Couverture nuageuse %</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[8].time.strftime('%d') %}
                    <td>
                      {% if date.cloud == 0 %}
                        -
                      {% else %}
                        {{ date.cloud }}
                      {% endif %}
                    </td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Pluie (mm/3h)</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[8].time.strftime('%d') %}
                    <td>
                      {% if date.rain == 0 %}
                        -
                      {% else %}
                        {{ date.rain }}
                      {% endif %}
                    </td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>°C</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[8].time.strftime('%d') %}
                    <td>{{ date.temp }}</td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Dir. Vent</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[8].time.strftime('%d') %}
                    <td>{{ date.wind_direction }}</td>
                    {% endif %}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Dir. Deg</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[8].time.strftime('%d') %}
                    <td>{{ date.wind_degree }}°</td>
                    {% endif%}
                  {% endfor %}
                </tr>
                <tr>
                  <th>Force vent (Noeuds)</th>
                  {% for date in meteo %}
                    {% if date.date.strftime('%d') == tides[8].time.strftime('%d') %}
                    <td>{{ date.wind_speed }}</td>
                    {% endif %}
                  {% endfor %}
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Table displaying Tides informations -->
          <div class="col-lg-12 table-responsive">
            <table id="tides-table" class="table table-bordered">
              <thead> Marées </thead>
              <tbody>
                <tr>
                  <th>Heure</th>
                  <th>Type</th>
                  <th>Hauteur (m)</th>
                </tr>
                <tr>
                  <td> 
                    {% for tide in tides %}
                      {% if tide.day == tides[8].day %}
                        <p> {{tide.time.strftime('%H:%M')}} </p>
                      {% endif %}
                    {% endfor %}
                  </td>
                  <td>
                    {% for tide in tides %}
                      {% if tide.day == tides[8].day %}
                        <p> {{ tide.type }} </p>
                      {% endif %}
                    {% endfor %}
                  </td>
                  <td>
                    {% for tide in tides %}
                      {% if tide.day == tides[8].day %}
                        <p> {{ tide.height }} </p>
                      {% endif %}
                    {% endfor %}
                  </td>
                </tr>
                </tbody>
            </table>
          </div>
        </div>


      </div>
  </div>
  
</section>


{% endblock %}

